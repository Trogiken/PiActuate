{% extends "base.html" %}
{% load static %}

{% block title %}Update{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'controls/includes/sidebar-navbar.css' %}">
<link rel="stylesheet" href="{% static 'controls/update.css' %}">
{% endblock %}

{% block navbar %}
{% include "controls/includes/sidebar-navbar.html" %}
{% endblock %}

{% block js %}
<script src="{% static 'controls/includes/sidebar-active.js' %}"></script>
<script src="{% static 'controls/update-ops.js' %}"></script>
{% endblock %}

{% block content %}
    <section class="Form-container" id="update-info">
        {% if update_check.has_update %}
            <h1>Update Available</h1>
            <h2>{{ update_check.local_version }} -> {{ update_check.web_version }}</h2>
            <p>{{ update_check.description }}</p>
            <button id="download-button" class="submit-button" onclick="sendUpdateCommand('prepare_update')">Download</button>
            <div id="success-buttons">
                <a href="{% url 'logout' %}">
                    <button class="submit-button" onclick="sendUpdateCommand('update')">Update</button>
                </a>
                <a href="{% url 'dashboard-page' %}">
                    <button class="submit-button">Cancel</button>
                </a>
            </div>
            <div id="error-buttons">
                <a href="{% url 'update-page' %}">
                    <button class="submit-button">Close</button>
                </a>
            </div>
        {% elif update_check.web_version is not None %}
            <h1>Up To Date</h1>
            <h2>{{ update_check.local_version }}</h2>
            <p>Latest version is currently installed</p>
        {% else %}
            <h1>Check Failed</h1>
            <h2>{{ update_check.local_version }}</h2>
            <p>Failed to check for updates</p>
        {% endif %}
    </section>
{% endblock %}